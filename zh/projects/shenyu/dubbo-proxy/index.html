<!doctype html><html><head><title>Dubbo 接入 ShenYu 网关 · ShenYu</title><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="The girl on the prairie"><meta name=generator content="Hugo 0.55.5"><link rel="shortcut icon" href=/img/favicon.png type=image/png><link href=https://unpkg.com/purecss@1.0.0/build/base-min.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/zoom-image.css rel=stylesheet><script src=/js/iconfont.js></script><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script>window.SITE_LANGUAGE="zh"</script><script src=/js/app.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-187960192-2','auto');ga('send','pageview');}</script></head><body><header class=ss-header><nav class=navbar role=navigation aria-label="main navigation"><div class=navbar-brand><a class=logo-link style=font-size:25px;margin-right:50px href=/zh/><img class=logo src=/img/logo/apache-shenyu.png></a><div class=-show-mobile><a id=mobile-menu-icon><svg class="icon" aria-hidden="true"><use xlink:href="#icon-menu"/></svg></a><nav id=mobile-menu><div id=js-menu-search-mobile class=navbar-search-mobile><input class=input placeholder=请输入要搜索的关键词><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search"/></svg></div><a href=/zh/projects/shenyu/download/><span>下载</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/zh/projects/shenyu/overview/><span>文档</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/zh/community/code-conduct/><span>社区</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/zh/news/><span>新闻</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/zh/awesome/><span>Awesome</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"/></svg></a>
<a href=/projects/shenyu/dubbo-proxy/><span>English</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-transfer"/></svg></a></nav></div></div><div class="navbar-menu -hidden-mobile"><div class=navbar-start><a class=navbar-item href=/zh/projects/shenyu/download/>下载</a>
<a class=navbar-item href=/zh/projects/shenyu/overview/>文档</a>
<a class=navbar-item href=/zh/community/code-conduct/>社区</a>
<a class=navbar-item href=/zh/news/>新闻</a>
<a class=navbar-item href=/zh/awesome/>Awesome</a>
<span class="navbar-item nav-hover"><a>Links</a><div class=dropdown-menu><a class=dropdown-item href=https://www.apache.org/>Apache Software Foundation</a>
<a class=dropdown-item href=https://github.com/apache/incubator-shenyu/issues>GitHub Issue Tracker</a>
<a class=dropdown-item href=https://www.apache.org/>License</a>
<a class=dropdown-item href=http://www.apache.org/events/current-event>Apache Events</a>
<a class=dropdown-item href=https://www.apache.org/licenses/>Security</a>
<a class=dropdown-item href=http://www.apache.org/foundation/sponsorship.html>Sponsor and Donate</a>
<a class=dropdown-item href=http://www.apache.org/foundation/thanks.html>Thanks</a></div></span></div><div class=navbar-end><div class=navbar-item><div id=js-menu-search class=navbar-search><input class=input placeholder=请输入要搜索的关键词><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search"/></svg></div></div><div class=navbar-item><a class=translation href=/projects/shenyu/dubbo-proxy/>En</a></div></div></div></nav></header><div class=ss-layout-container><aside class="ss-layout-aside -left ss-card -soft-hidden"><div id=js-drawer class=ss-toc><div id=js-drawer-handle class=drawer-handle><svg class="icon icon-menu" aria-hidden="true"><use xlink:href="#icon-menu"/></svg><svg class="icon icon-close" aria-hidden="true"><use xlink:href="#icon-close"/></svg></div><div class=drawer-body><div class=header title="Apache ShenYu是一个异步的，高性能的，跨语言的，响应式的API网关。">Apache ShenYu(current)<div class="ss-toc-list-card -hidden-mobile"><svg class="icon -hidden-mobile" aria-hidden="true"><use xlink:href="#icon-menu1"/></svg><div class=ss-tooltip><div class=toc-list><h4 class=title>主要项目</h4><ul class=list><li class=item><a href=/zh/projects/shenyu/overview>Apache ShenYu(current)</a></li><li class=item><a href=/zh/projects/shenyu-2.3.0/overview>Apache ShenYu(2.3.0)</a></li></ul></div></div></div></div><div class=body><ul class=leaf-section><li class=item><div class=link><a title=介绍 href=/zh/projects/shenyu/overview>介绍</a></div></li><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title=设计文档>设计文档</a></div><ul class=leaf-section><li class=item><div class=link><a title="ShenYu Admin数据结构" href=/zh/projects/shenyu/database-design>ShenYu Admin数据结构</a></div></li><li class=item><div class=link><a title=数据同步 href=/zh/projects/shenyu/data-sync>数据同步</a></div></li><li class=item><div class=link><a title=应用客户端接入 href=/zh/projects/shenyu/register-center-design>应用客户端接入</a></div></li><li class=item><div class=link><a title=流量控制 href=/zh/projects/shenyu/flow-control>流量控制</a></div></li></ul></li><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title=运维部署>运维部署</a></div><ul class=leaf-section><li class=item><div class=link><a title=本地部署 href=/zh/projects/shenyu/deployment-local>本地部署</a></div></li><li class=item><div class=link><a title=源码包部署 href=/zh/projects/shenyu/deployment-package>源码包部署</a></div></li><li class=item><div class=link><a title=Docker部署 href=/zh/projects/shenyu/deployment-docker>Docker部署</a></div></li><li class=item><div class=link><a title=Kubernetes部署 href=/zh/projects/shenyu/deployment-k8s>Kubernetes部署</a></div></li><li class=item><div class=link><a title=Helm部署 href=/zh/projects/shenyu/deployment-helm>Helm部署</a></div></li><li class=item><div class=link><a title=自定义部署 href=/zh/projects/shenyu/deployment-custom>自定义部署</a></div></li></ul></li><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title=快速开始>快速开始</a></div><ul class=leaf-section><li class=item><div class=link><a title=Dubbo代理 href=/zh/projects/shenyu/quick-start-dubbo>Dubbo代理</a></div></li><li class=item><div class=link><a title=Http代理 href=/zh/projects/shenyu/quick-start-http>Http代理</a></div></li><li class=item><div class=link><a title=gRPC代理 href=/zh/projects/shenyu/quick-start-grpc>gRPC代理</a></div></li><li class=item><div class=link><a title="Spring Cloud代理" href=/zh/projects/shenyu/quick-start-springcloud>Spring Cloud代理</a></div></li><li class=item><div class=link><a title=Sofa代理 href=/zh/projects/shenyu/quick-start-sofa>Sofa代理</a></div></li><li class=item><div class=link><a title=Tars代理 href=/zh/projects/shenyu/quick-start-tars>Tars代理</a></div></li><li class=item><div class=link><a title=Motan代理 href=/zh/projects/shenyu/quick-start-motan>Motan代理</a></div></li></ul></li><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title=用户文档>用户文档</a></div><ul class=leaf-section><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title=admin使用>admin使用</a></div><ul class=leaf-section><li class=item><div class=link><a title=插件配置 href=/zh/projects/shenyu/plugin-handle-explanation>插件配置</a></div></li><li class=item><div class=link><a title=选择器和规则配置 href=/zh/projects/shenyu/selector-and-rule>选择器和规则配置</a></div></li><li class=item><div class=link><a title=字典配置 href=/zh/projects/shenyu/dictionary-management>字典配置</a></div></li><li class=item><div class=link><a title=权限管理 href=/zh/projects/shenyu/authority-management>权限管理</a></div></li></ul></li><li class=item><div class=link><a title=客户端接入 href=/zh/projects/shenyu/register-center-access>客户端接入</a></div></li><li class=item><div class=link><a title=Http用户 href=/zh/projects/shenyu/http-proxy>Http用户</a></div></li><li class=item><div class="link -current"><a title=Dubbo用户 href=/zh/projects/shenyu/dubbo-proxy>Dubbo用户</a></div></li><li class=item><div class=link><a title=SpringCloud用户 href=/zh/projects/shenyu/spring-cloud-proxy>SpringCloud用户</a></div></li><li class=item><div class=link><a title=Sofa用户 href=/zh/projects/shenyu/sofa-rpc-proxy>Sofa用户</a></div></li></ul></li><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title=插件集合>插件集合</a></div><ul class=leaf-section><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title="Http 处理">Http 处理</a></div><ul class=leaf-section><li class=item><div class=link><a title=Rewrite插件 href=/zh/projects/shenyu/rewrite-plugin>Rewrite插件</a></div></li><li class=item><div class=link><a title=Redirect插件 href=/zh/projects/shenyu/redirect-plugin>Redirect插件</a></div></li><li class=item><div class=link><a title=Request插件 href=/zh/projects/shenyu/request-plugin>Request插件</a></div></li><li class=item><div class=link><a title=Context-path插件 href=/zh/projects/shenyu/context-path-plugin>Context-path插件</a></div></li><li class=item><div class=link><a title=Param-mapping插件 href=/zh/projects/shenyu/param-mapping-plugin>Param-mapping插件</a></div></li><li class=item><div class=link><a title=ModifyResponse插件 href=/zh/projects/shenyu/modify-response-plugin>ModifyResponse插件</a></div></li></ul></li><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title="RPC 代理">RPC 代理</a></div><ul class=leaf-section><li class=item><div class=link><a title=Divide插件 href=/zh/projects/shenyu/divide-plugin>Divide插件</a></div></li><li class=item><div class=link><a title=Dubbo插件 href=/zh/projects/shenyu/dubbo-plugin>Dubbo插件</a></div></li><li class=item><div class=link><a title="Spring Cloud插件" href=/zh/projects/shenyu/spring-cloud-plugin>Spring Cloud插件</a></div></li><li class=item><div class=link><a title=Sofa插件 href=/zh/projects/shenyu/sofa-plugin>Sofa插件</a></div></li><li class=item><div class=link><a title=gRPC插件 href=/zh/projects/shenyu/grpc-plugin>gRPC插件</a></div></li><li class=item><div class=link><a title=Tars插件 href=/zh/projects/shenyu/tars-plugin>Tars插件</a></div></li><li class=item><div class=link><a title=Motan插件 href=/zh/projects/shenyu/motan-plugin>Motan插件</a></div></li></ul></li><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title=熔断和限流>熔断和限流</a></div><ul class=leaf-section><li class=item><div class=link><a title=Hystrix插件 href=/zh/projects/shenyu/hystrix-plugin>Hystrix插件</a></div></li><li class=item><div class=link><a title=Sentinel插件 href=/zh/projects/shenyu/sentinel-plugin>Sentinel插件</a></div></li><li class=item><div class=link><a title=Resilience4j插件 href=/zh/projects/shenyu/resilience4j-plugin>Resilience4j插件</a></div></li><li class=item><div class=link><a title=RateLimiter插件 href=/zh/projects/shenyu/rate-limiter-plugin>RateLimiter插件</a></div></li></ul></li><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title=权限认证>权限认证</a></div><ul class=leaf-section><li class=item><div class=link><a title=Waf插件 href=/zh/projects/shenyu/waf-plugin>Waf插件</a></div></li><li class=item><div class=link><a title=Sign插件 href=/zh/projects/shenyu/sign-plugin>Sign插件</a></div></li><li class=item><div class=link><a title=JWT插件 href=/zh/projects/shenyu/jwt-plugin>JWT插件</a></div></li><li class=item><div class=link><a title="OAuth 2插件" href=/zh/projects/shenyu/oauth2-plugin>OAuth 2插件</a></div></li></ul></li><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title=可观测性>可观测性</a></div><ul class=leaf-section><li class=item><div class=link><a title=Monitor插件 href=/zh/projects/shenyu/monitor-plugin>Monitor插件</a></div></li><li class=item><div class=link><a title=Logging插件 href=/zh/projects/shenyu/logging-plugin>Logging插件</a></div></li></ul></li></ul></li><li class=item><div class=link><svg class="icon arrow" aria-hidden="true"><use xlink:href="#icon-arrow"/></svg><a title=开发者文档>开发者文档</a></div><ul class=leaf-section><li class=item><div class=link><a title=自定义filter href=/zh/projects/shenyu/custom-filter>自定义filter</a></div></li><li class=item><div class=link><a title=自定义插件 href=/zh/projects/shenyu/custom-plugin>自定义插件</a></div></li><li class=item><div class=link><a title=文件上传下载 href=/zh/projects/shenyu/file-and-image>文件上传下载</a></div></li><li class=item><div class=link><a title=自定义解析IP与Host href=/zh/projects/shenyu/custom-parsing-ip-and-host>自定义解析IP与Host</a></div></li><li class=item><div class=link><a title=自定义返回结果 href=/zh/projects/shenyu/custom-result>自定义返回结果</a></div></li><li class=item><div class=link><a title=自定义签名插件算法与验证 href=/zh/projects/shenyu/custom-sign-algorithm>自定义签名插件算法与验证</a></div></li><li class=item><div class=link><a title=多语言http客户端接入 href=/zh/projects/shenyu/developer-shenyu-client>多语言http客户端接入</a></div></li><li class=item><div class=link><a title=线程模型 href=/zh/projects/shenyu/thread>线程模型</a></div></li><li class=item><div class=link><a title=shenyu调优 href=/zh/projects/shenyu/shenyu-optimize>shenyu调优</a></div></li><li class=item><div class=link><a title=SPI href=/zh/projects/shenyu/spi-design>SPI</a></div></li></ul></li><li class=item><div class=link><a title=版本发布 href=/zh/projects/shenyu/change-log>版本发布</a></div></li><li class=item><div class=link><a title=文档下载 href=/zh/projects/shenyu/download>文档下载</a></div></li></ul></div></div></div></aside><main class="ss-layout-main -card"><div class=ss-meta><div class=container><h1 class=title>Dubbo 接入 ShenYu 网关</h1><a class="edit-button -hidden-mobile" href=https://github.com/apache/incubator-shenyu-website/edit/main/content/zh/projects/shenyu/dubbo-proxy/index.md>编辑</a></div><div class=meta>更新时间: 2021-07-16</div></div><article class=typo><h2 id=说明>说明</h2><ul><li>此篇文章是 dubbo 用户使用 dubbo 插件支持，以及自己的 dubbo 服务接入 ShenYu 网关的教程。</li><li>支持 alibaba dubbo（&lt; 2.7.x） 以及 apache dubbo (&gt;=2.7.x)。</li><li>接入前，请正确的启动 <code>shenyu-admin</code>，以及<a href=../shenyu-set-up>搭建环境</a> Ok。</li></ul><h2 id=引入网关对dubbo支持的插件>引入网关对dubbo支持的插件</h2><ul><li><p>在网关的 <code>pom.xml</code> 文件中增加如下依赖：</p><ul><li>alibaba dubbo 用户, dubbo 版本换成你的，注册中心的 jar 包换成你的，以下是参考。</li></ul><pre><code class=language-xml>&lt;!--shenyu alibaba dubbo plugin start--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.shenyu&lt;/groupId&gt;
  &lt;artifactId&gt;shenyu-spring-boot-starter-plugin-alibaba-dubbo&lt;/artifactId&gt;
   &lt;version&gt;${last.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- shenyu  alibaba dubbo plugin end--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
  &lt;artifactId&gt;dubbo&lt;/artifactId&gt;
  &lt;version&gt;2.6.5&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;
  &lt;artifactId&gt;curator-client&lt;/artifactId&gt;
  &lt;version&gt;4.0.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;
  &lt;artifactId&gt;curator-framework&lt;/artifactId&gt;
  &lt;version&gt;4.0.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;
  &lt;artifactId&gt;curator-recipes&lt;/artifactId&gt;
  &lt;version&gt;4.0.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><ul><li>apache dubbo 用户，dubbo 版本换成你的，使用什么注册中心换成你的, 以下是参考≥≥使用什么注册中心，就引入啥。</li></ul><pre><code class=language-xml>&lt;!--shenyu apache dubbo plugin start--&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.apache.shenyu&lt;/groupId&gt;
   &lt;artifactId&gt;shenyu-spring-boot-starter-plugin-apache-dubbo&lt;/artifactId&gt;
   &lt;version&gt;${last.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--shenyu apache dubbo plugin end--&gt;

&lt;dependency&gt;
   &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;
   &lt;artifactId&gt;dubbo&lt;/artifactId&gt;
   &lt;version&gt;2.7.5&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- Dubbo Nacos registry dependency start --&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;
   &lt;artifactId&gt;dubbo-registry-nacos&lt;/artifactId&gt;
   &lt;version&gt;2.7.5&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
   &lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;
   &lt;artifactId&gt;nacos-client&lt;/artifactId&gt;
   &lt;version&gt;1.1.4&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- Dubbo Nacos registry dependency  end--&gt;

&lt;!-- Dubbo zookeeper registry dependency start--&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;
   &lt;artifactId&gt;curator-client&lt;/artifactId&gt;
   &lt;version&gt;4.0.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;
   &lt;artifactId&gt;curator-framework&lt;/artifactId&gt;
   &lt;version&gt;4.0.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;
   &lt;artifactId&gt;curator-recipes&lt;/artifactId&gt;
   &lt;version&gt;4.0.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- Dubbo zookeeper registry dependency end --&gt;
</code></pre></li><li><p>重启网关服务。</p></li></ul><h2 id=dubbo-服务接入网关-可以参考-shenyu-examples-dubbo-https-github-com-apache-incubator-shenyu-tree-master-shenyu-examples-shenyu-examples-dubbo>dubbo 服务接入网关，可以参考：<a href=https://github.com/apache/incubator-shenyu/tree/master/shenyu-examples/shenyu-examples-dubbo>shenyu-examples-dubbo</a></h2><ul><li><p>alibaba dubbo 用户</p><ul><li><p>springboot</p><ul><li>引入以下依赖</li></ul><pre><code class=language-xml>&lt;dependency&gt;
     &lt;groupId&gt;org.apache.shenyu&lt;/groupId&gt;
     &lt;artifactId&gt;shenyu-spring-boot-starter-client-alibaba-dubbo&lt;/artifactId&gt;
     &lt;version&gt;${last.version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><ul><li><p>注册中心详细接入配置请参考：<a href=../register-center-access>注册中心接入</a>。</p></li><li><p>spring</p></li><li><p>引入以下依赖 ：</p></li></ul><pre><code class=language-xml>&lt;dependency&gt;
   &lt;groupId&gt;org.apache.shenyu&lt;/groupId&gt;
   &lt;artifactId&gt;shenyu-client-alibaba-dubbo&lt;/artifactId&gt;
   &lt;version&gt;${last.version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><ul><li>在你的 bean 定义的 xml 文件中新增如下 ：</li></ul><pre><code class=language-xml>&lt;bean id =&quot;alibabaDubboServiceBeanPostProcessor&quot; class =&quot;org.apache.shenyu.client.alibaba.dubbo.AlibabaDubboServiceBeanPostProcessor&quot;&gt;
   &lt;constructor-arg  ref=&quot;shenyuRegisterCenterConfig&quot;/&gt;
&lt;/bean&gt;

&lt;bean id=&quot;shenyuRegisterCenterConfig&quot; class=&quot;org.apache.shenyu.register.common.config.ShenyuRegisterCenterConfig&quot;&gt;
       &lt;property name=&quot;registerType&quot; value=&quot;http&quot;/&gt;
       &lt;property name=&quot;serverList&quot; value=&quot;http://localhost:9095&quot;/&gt;
       &lt;property name=&quot;props&quot;&gt;
          &lt;map&gt;
            &lt;entry key=&quot;contextPath&quot; value=&quot;/你的contextPath&quot;/&gt;
            &lt;entry key=&quot;appName&quot; value=&quot;你的名字&quot;/&gt;
            &lt;entry key=&quot;ifFull&quot; value=&quot;false&quot;/&gt;
          &lt;/map&gt;
        &lt;/property&gt;
  &lt;/bean&gt;
</code></pre></li></ul></li><li><p>apache dubbo 用户</p><ul><li><p>springboot</p><ul><li>引入以下依赖</li></ul><pre><code class=language-xml>&lt;dependency&gt;
     &lt;groupId&gt;org.apache.shenyu&lt;/groupId&gt;
     &lt;artifactId&gt;shenyu-spring-boot-starter-client-apache-dubbo&lt;/artifactId&gt;
     &lt;version&gt;${last.version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><ul><li><p>注册中心详细接入配置请参考：<a href=../register-center-access>注册中心配置</a>.</p></li><li><p>spring</p></li><li><p>引入以下依赖 ：</p></li></ul><pre><code class=language-xml>&lt;dependency&gt;
   &lt;groupId&gt;org.apache.shenyu&lt;/groupId&gt;
   &lt;artifactId&gt;shenyu-client-apache-dubbo&lt;/artifactId&gt;
   &lt;version&gt;${last.version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><ul><li>在你的 bean 定义的 xml 文件中新增如下 ：</li></ul><pre><code class=language-xml>  &lt;bean id =&quot;apacheDubboServiceBeanPostProcessor&quot; class =&quot;org.apache.shenyu.client.apache.dubbo.ApacheDubboServiceBeanPostProcessor&quot;&gt;
       &lt;constructor-arg ref=&quot;shenyuRegisterCenterConfig&quot;/&gt;
  &lt;/bean&gt;

  &lt;bean id=&quot;shenyuRegisterCenterConfig&quot; class=&quot;org.apache.shenyu.register.common.config.ShenyuRegisterCenterConfig&quot;&gt;
       &lt;property name=&quot;registerType&quot; value=&quot;http&quot;/&gt;
       &lt;property name=&quot;serverList&quot; value=&quot;http://localhost:9095&quot;/&gt;
       &lt;property name=&quot;props&quot;&gt;
          &lt;map&gt;
            &lt;entry key=&quot;contextPath&quot; value=&quot;/你的contextPath&quot;/&gt;
            &lt;entry key=&quot;appName&quot; value=&quot;你的名字&quot;/&gt;
            &lt;entry key=&quot;ifFull&quot; value=&quot;false&quot;/&gt;
          &lt;/map&gt;
        &lt;/property&gt;
  &lt;/bean&gt;
</code></pre></li></ul></li></ul><h2 id=dubbo-插件设置>dubbo 插件设置</h2><ul><li><p>首先在 <code>shenyu-admin</code> 插件管理中，把<code>dubbo</code> 插件设置为开启。</p></li><li><p>其次在 <code>dubbo</code> 插件中配置你的注册地址，或者其他注册中心的地址。</p></li></ul><pre><code class=language-yaml>{&quot;register&quot;:&quot;zookeeper://localhost:2181&quot;}   or {&quot;register&quot;:&quot;nacos://localhost:8848&quot;}
</code></pre><h2 id=接口注册到网关>接口注册到网关</h2><ul><li><p>你 dubbo 服务实现类的，方法上加上 <code>@ShenyuDubboClient</code> 注解，表示该接口方法注册到网关。</p></li><li><p>启动你的提供者，输出日志 <code>dubbo client register success</code> 大功告成，你的 dubbo 接口已经发布到 ShenYu 网关.如果还有不懂的，可以参考 <code>shenyu-test-dubbo</code>项目。</p></li></ul><h2 id=dubbo用户请求以及参数说明>dubbo用户请求以及参数说明</h2><ul><li><p>说白了，就是通过 http 的方式来请求你的 dubbo 服务</p></li><li><p>ShenYu 网关需要有一个路由前缀，这个路由前缀就是你接入项目进行配置 <code>contextPath</code></p></li></ul><pre><code class=language-yaml># 比如你有一个 order服务 它有一个接口，它的注册路径 /order/test/save

# 现在就是通过 post 方式请求网关：http://localhost:9195/order/test/save

# 其中 localhost:9195 为网关的 ip 端口，默认端口是 9195 ，/order 是你 dubbo 接入网关配置的 contextPath

</code></pre><ul><li><p>参数传递：</p><ul><li><p>通过 http post 方式访问网关，通过body，json类型传递。</p></li><li><p>更多参数类型传递，可以参考 <a href=https://github.com/apache/incubator-shenyu/tree/master/shenyu-examples/shenyu-examples-dubbo>shenyu-examples-dubbo</a> 中的接口定义，以及参数传递方式。</p></li></ul></li><li><p>单个 java bean参数类型（默认）</p></li><li><p>多参数类型支持，在网关的yaml 配置中新增如下配置：</p></li></ul><pre><code class=language-yaml>shenyu:
    dubbo:
      parameter: multi
</code></pre><ul><li><p>自定义实现多参数支持:</p><ul><li>在你搭建的网关项目中，新增一个类 A，实现 <code>org.apache.shenyu.web.dubbo.DubboParamResolveService</code>。</li></ul><pre><code class=language-java>public interface DubboParamResolveService {

   /**
    * Build parameter pair.
    * this is Resolve http body to get dubbo param.
    *
    * @param body           the body
    * @param parameterTypes the parameter types
    * @return the pair
    */
   Pair&lt;String[], Object[]&gt; buildParameter(String body, String parameterTypes);
}
</code></pre><ul><li><p><code>body</code> 为 http 中 body 传的 json 字符串。</p></li><li><p><code>parameterTypes</code>: 匹配到的方法参数类型列表，如果有多个，则使用 <code>,</code> 分割。</p></li><li><p>Pair 中，left 为参数类型，right 为参数值，这是 dubbo 泛化调用的标准</p></li><li><p>把你的类注册成 Spring 的 bean，覆盖默认的实现。</p></li></ul><pre><code class=language-java>@Bean
public DubboParamResolveService A() {
      return new A();
}
</code></pre></li></ul><h2 id=服务治理>服务治理</h2><ul><li>标签路由<ul><li>请求时在 header 中添加 <code>Dubbo_Tag_Route</code>，并设置对应的值，之后当前请求就会路由到指定 tag 的 provider，只对当前请求有效；</li></ul></li><li>服务提供者直连<ul><li>设置 <code>@ShenyuDubboClient</code> 注解中的 <code>url</code> 属性；</li><li>修改 Admin 控制台修改元数据内的 url 属性；</li><li>对所有请求有效；</li></ul></li><li><p>参数验证和自定义异常</p><ul><li>指定 <code>validation = &quot;shenyuValidation&quot;</code>;</li><li>在接口中抛出 <code>ShenyuException</code> 时，异常信息会返回，需要注意的是显式抛出 <code>ShenyuException</code>；</li></ul><pre><code class=language-java>@Service(validation = &quot;shenyuValidation&quot;)
public class TestServiceImpl implements TestService {

    @Override
    @ShenyuDubboClient(path = &quot;/test&quot;, desc = &quot;test method&quot;)
    public String test(@Valid HelloServiceRequest name) throws ShenyuException {
        if (true){
            throw new ShenyuException(&quot;Param binding error.&quot;);
        }
        return &quot;Hello &quot; + name.getName();
    }
}
</code></pre><ul><li>请求参数</li></ul><pre><code class=language-java>public class HelloServiceRequest implements Serializable {

    private static final long serialVersionUID = -5968745817846710197L;

    @NotEmpty(message = &quot;name cannot be empty&quot;)
    private String name;

    @NotNull(message = &quot;age cannot be null&quot;)
    private Integer age;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }
}
</code></pre><ul><li>发送请求</li></ul><pre><code class=language-json>{
    &quot;name&quot;: &quot;&quot;
}
</code></pre><ul><li>返回</li></ul><pre><code class=language-json>{
    &quot;code&quot;: 500,
    &quot;message&quot;: &quot;Internal Server Error&quot;,
    &quot;data&quot;: &quot;name cannot be empty,age cannot be null&quot;
}
</code></pre><ul><li>当按照要求传递请求参数时，会返回自定义异常的信息</li></ul><pre><code class=language-json>{
    &quot;code&quot;: 500,
    &quot;message&quot;: &quot;Internal Server Error&quot;,
    &quot;data&quot;: &quot;Param binding error.&quot;
}
</code></pre><h2 id=大白话讲解如果通过-http-网关-dubbo-provider>大白话讲解如果通过 http &ndash;&gt; 网关 &ndash;&gt; dubbo provider</h2><ul><li><p>说白了，就是把 http 请求，转成 dubbo 协议，内部使用 dubbo 泛化来进行调用。</p></li><li><p>首先你要回想下，你的 dubbo 服务在接入网关的时候，是不是加了个 <code>@ShenyuDubboClient</code> 注解，里面是不是有个 path 字段来指定你请求的路径？</p></li><li><p>你是不是还在yml中配置了一个 <code>contextPath</code>?</p></li><li><p>如果您还记得，那我们就开始。</p></li><li><p>假如你有一个这样的方法, contextPath 配置的是 <code>/dubbo</code></p></li></ul><p><pre><code class=language-java>@Override
@ShenyuDubboClient(path = &quot;/insert&quot;, desc = &quot;插入一条数据&quot;)
public DubboTest insert(final DubboTest dubboTest) {
return dubboTest;
}
</code></pre></li></p><p><li><p>那么我们请求的路径为：<code><a href=http://localhost:9195/dubbo/insert>http://localhost:9195/dubbo/insert</a></code>，再说一下，<code>localhost:9195</code>是网关的域名，如果你更改了，这里也要改。</p></li></p><p><li><p>那么请求参数呢？ <code>DubboTest</code> 是一个 javabean 对象，有 2 个字段，id 与 name ，那么我们通过 body 中传递这个对象的 json 数据就好。</p></p><p><pre><code>{&quot;id&quot;: &quot;1234&quot;, &quot;name&quot;: &quot;XIAO5y&quot;}
</code></pre></li></p><p><li><p>如果你的接口中，没有参数，那么 body 传值为：</p></p><p><pre><code>{}
</code></pre></li></p><p><li><p>如果你的接口有很多个参数？往上看一点，有介绍。</p></li></ul></p></article></main></div><footer class=ss-footer><div class=container><div class=links><div class="cate  -show-mobile"><h2 class=cate-title>Apache</h2><a class=link href=https://www.apache.org/>Foundation</a>
<a class=link href=https://github.com/apache/incubator-shenyu/issues>GitHub Issue Tracker</a>
<a class=link href=https://www.apache.org/licenses/>License</a>
<a class=link href=https://www.apache.org/security/>Security</a>
<a class=link href=http://www.apache.org/events/current-event>Events</a>
<a class=link href=http://www.apache.org/foundation/sponsorship.html>Sponsorship</a>
<a class=link href=http://www.apache.org/foundation/thanks.html>Thanks</a></div><div class=cate><h2 class=cate-title>资源</h2><a class=link href=https://github.com/apache/incubator-shenyu>Github</a>
<a class=link href=/zh/projects/shenyu/overview/>文档</a></div><div class=cate><h2 class=cate-title>参与进来</h2><a class=link href=https://github.com/apache/incubator-shenyu/issues/new>反馈</a>
<a class=link href=/zh/community>社区</a>
<a class=link href=/zh/news>新闻</a></div><div class=cate><h2 class=cate-title>订阅邮件组</h2><a class=link href=mailto://dev-subscribe@shenyu.apache.org>订阅邮件</a>
<a class=link href=https://lists.apache.org/list.html?dev@shenyu.apache.org>邮件归档</a></div></div><div class=qrcode><div><img class=qrcode-img src=/img/qrcode/WechatIMG127.jpeg><p class=qrcode-desc>微信公众号</p></div></div></div><div class=copyright><p>Copyright © 2021 The Apache Software Foundation. Licensed under the Apache License, Version 2.0.
Apache ShenYu, Apache Incubator, Apache, the Apache feather logo, the Apache EventMesh logo and the Apache Incubator project logo are trademarks of The Apache Software Foundation.
Apache ShenYu is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator.
Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects.
While incubation status is not necessarily a reflection of the completeness or stability of the code,
it does indicate that the project has yet to be fully endorsed by the ASF.</p></div></footer></body></html>